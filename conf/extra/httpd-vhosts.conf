<VirtualHost *:80>
    ServerName campus.local
    ServerAlias www.campus.local
    
    RewriteEngine On
    RewriteRule ^(.*)$ https://campus.local$1 [R=301,L]
    
    ErrorLog "C:/campus/logs/campus_error.log"
    CustomLog "C:/campus/logs/campus_access.log" combined_campus
</VirtualHost>

<VirtualHost *:80>
    ServerName staff.campus.local
    
    RewriteEngine On
    RewriteRule ^(.*)$ https://staff.campus.local$1 [R=301,L]
    
    ErrorLog "C:/campus/logs/staff_error.log"
    CustomLog "C:/campus/logs/staff_access.log" combined_campus
</VirtualHost>

<VirtualHost *:443>
    ServerName campus.local
    DocumentRoot "C:/campus/htdocs"
    
    SSLEngine on
    SSLCertificateFile "C:/campus/conf/ssl/campus.crt"
    SSLCertificateKeyFile "C:/campus/conf/ssl/campus.key"
    
    Header always set X-Project "TechCampus"
    
    Redirect 301 /old https://campus.local/new
    Redirect 410 /legacy.html
    
    Alias /static/ "C:/campus/assets/"
    Alias /docs/ "C:/campus/secure/docs/"
    
    <Directory "C:/campus/assets">
        Options -Indexes
        Require all granted
        Header always set Cache-Control "max-age=3600"
    </Directory>
    
    <Directory "C:/campus/secure/docs">
        Options -Indexes
        Require all granted
    </Directory>
    
    ErrorLog "C:/campus/logs/campus_ssl_error.log"
    CustomLog "C:/campus/logs/campus_ssl_access.log" combined_campus
</VirtualHost>

<VirtualHost *:443>
    ServerName staff.campus.local
    DocumentRoot "C:/campus/htdocs"
    
    SSLEngine on
    SSLCertificateFile "C:/campus/conf/ssl/campus.crt"
    SSLCertificateKeyFile "C:/campus/conf/ssl/campus.key"
    
    Header always set X-Project "TechCampus"
    
    Alias /docs/ "C:/campus/secure/docs/"
    
    <Directory "C:/campus/secure/docs">
        AuthType Basic
        AuthName "Staff Area - Authentication Required"
        AuthUserFile "C:/campus/conf/users.htpasswd"
        Require user teacher1 mentor2
        
        ErrorDocument 401 /staff-401.html
        
        Options -Indexes
    </Directory>

    ErrorLog "C:/campus/logs/staff_ssl_error.log"
    CustomLog "C:/campus/logs/staff_ssl_access.log" combined_campus
</VirtualHost>